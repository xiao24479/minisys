<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="/_ext/style/css.css" rel="stylesheet" type="text/css">
<script language="javascript">
function right_detail_save(id){
	var name          = document.getElementById('name').value;//name
	var url           = document.getElementById('url').value;//url
	var comment       = document.getElementById('comment').value;//comments
	var order         = document.getElementById('order').value;//order
	var project       = document.getElementById('project').value;// project
	
	var hidden_name   = document.getElementById('hidden_name').value;//hidden name
	var hidden_project= document.getElementById('hidden_project').value;//hidden project
	var flag          = document.getElementById('flag').value;//flag
	var father_id     = document.getElementById('father_id').value;//father
	var is_show     = document.getElementById('is_show').value;//father
	var hidden_father = document.getElementById('hidden_father').value;//如果是0，是根目录；否则，就不是。

	if(name.trim()==''){
			alert('功能名称不能为空！');
			document.getElementById('name').focus();
	}else if(project.trim() ==''){
			alert('项目名称不能为空！');
			document.getElementById('project').focus();
	}else{
		$.ajax({
			url:"main.php",
			type:"get",
			dataType:"json",
			data:{m:"roleRights",a:"right_detail_save",is_show:is_show,id:id,hidden_father:hidden_father,name:name,url:url,comment:comment,order:order,project:project,hidden_name:hidden_name,hidden_project:hidden_project,flag:flag,father_id:father_id,j:1,tt:Math.random()},
			success:function(resp){
				if(resp.message=='ok'){
					//get_role_rights(document.getElementById('select').value); 
					//chang the text.
					var menuid = "menutext_"+id;
					//change the menu text.
					//alert(menuid);
					document.getElementById(menuid).innerHTML=name;
					
					alert('成功保存！');
					get_right_info(id);
				}else if(resp.message=='no'){
					alert('该功能匹配项目名称存在！');
					get_right_info(id);
				}
			}
		});
    }

}
String.prototype.trim= function(){
    return this.replace(/(^\s*)|(\s*$)/g, "");  
}
</script>
<!--<div class="form" style="width:450px;">
	<dl>
		<DT class="form-title"><strong>功能修改</strong></DT>
		<Dd>
			<DIV class="div"><strong>功能名称:</strong><input name="name" type="text" id="name" size="15"  value="{$right.name}" maxlength="30" class="input"><input type="hidden" name="hidden_name" value="{$right.name}" id="hidden_name"/><strong class="red">*</strong></DIV>
			<div class="div"><strong>功能路径:</strong><input name="url" type="text" id="url" size="50" value="{$right.url}" maxlength="50"  class="input">
			</div>
			<div class="div"><strong>功能说明:</strong><input name="comment" type="text" id="comment" size="50" value="{$right.comment}" maxlength="50" class="input">
			</div>
			<div class="div"><strong>排列顺序:</strong><input name="order" type="text" id="order" size="15" value="{$right.sort}" maxlength="15"  class="input"></div>
			<div class="div"><strong>项目名称:</strong><input name="project" type="text" id="project" size="15"  value="{$right.project}" maxlength="15" class="input"><input type="hidden" name="hidden_project" id="hidden_project" value="{$right.project}"/><strong class="red">*</strong></div>
			<div class="div"><strong>是否有效:</strong><select name="flag" id="flag">
    <option value="1" {if $right.available=='1'} selected {/if}>有效</option>
    <option value="0" {if $right.available=='0'} selected {/if}>无效</option>
  </select></div>
  			<div class="div"><strong>上级菜单:</strong><select name="father_id"  id="father_id" onChange="select_father(this.value)" {if $is_select=="no"} disabled {/if}>
   <option value="0" {if $right.father_code=='0'} selected {/if}>根目录</option>
   {foreach from=$father_rs item=father}
     <option value="{$father.code}" {if $father.code==$right.father_code} selected {/if}>[{$father.project}]{$father.name}</option>
   {/foreach}
</select><input type="hidden" name="hidden_father" value="{$right.father_code}" id="hidden_father"/>
			</div>
			<div class="div"><strong>是否显示:</strong><select name="is_show" id="is_show">
    <option value="1" {if $right.is_show=='1'} selected {/if}>显示</option>
    <option value="0" {if $right.is_show=='0'} selected {/if}>不显示</option>
  </select></div>
			  <div class="div_submit" style="padding-left:90px;">
			<input class="submit" type="submit" value="修&nbsp;&nbsp;改" style="width:73px;" onClick="javascript:right_detail_save({$right.id});">
			</div>
		</Dd>
	</dl>
</div>-->
  <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
							功能修改
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-lg-12">
										
										 <div class="form-group">
                                            <label>功能名称 <span style="color:#FF0000;">*</span></label>
                                            <input class="form-control" name="name" type="text" id="name" value="{$right.name}">
											<input type="hidden" name="hidden_name" value="{$right.name}" id="hidden_name"/>
                                        </div>
                                        <div class="form-group">
                                            <label>功能路径 </label>
                                            <input class="form-control" name="url" type="text" id="url" value="{$right.url}">
                                        </div>
										<div class="form-group">
                                            <label>功能说明 </label>
                                            <input class="form-control" name="comment" type="text" id="comment" value="{$right.comment}">
                                        </div>
										<div class="form-group">
                                            <label>排列顺序 </label>
                                            <input class="form-control" name="order" type="text" id="order" value="{$right.sort}">
                                        </div>
										<div class="form-group">
                                            <label>项目名称 <span style="color:#FF0000;">*</span></label>
                                            <input class="form-control" name="project" type="text" id="project" value="{$right.project}">
											<input type="hidden" name="hidden_project" id="hidden_project" value="{$right.project}"/>
									   </div>
										<div class="form-group">
                                            <label>是否有效</label>
                                            <select class="form-control" name="flag" id="flag">
                                                <option {if $right.available=='1'} selected {/if} value="1">有效</option>
                                                <option {if $right.available=='0'} selected {/if} value="0">无效</option>
                                            </select>
                                        </div>
                                       <div class="form-group">
                                            <label>上级目录</label>
                                            <select class="form-control" name="father_id" id="father_id">
												<option value="0" {if $right.father_code=='0'} selected {/if}>根目录</option>
                                                 {foreach from=$father_rs item=father}
													 <option value="{$father.code}" {if $father.code==$right.father_code} selected {/if}>[{$father.project}]{$father.name}</option>
												   {/foreach}
                                            </select>
											<input type="hidden" name="hidden_father" value="{$right.father_code}" id="hidden_father"/>
                                        </div>
										<div class="form-group">
                                            <label>是否显示</label>
                                            <select class="form-control" name="is_show" id="is_show">
                                                <option value="1" {if $right.is_show=='1'} selected {/if}>显示</option>
                                                <option value="0" {if $right.is_show=='0'} selected {/if}>不显示</option>
                                            </select>
                                        </div>
										 <input  onClick="javascript:right_detail_save({$right.id});" type="submit" class="btn btn-default" value="提交修改">
                                   
                                </div>
                            </div>
                            <!-- /.row (nested) -->
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>